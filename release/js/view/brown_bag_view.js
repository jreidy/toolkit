(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","util/util","model/user","model/loading","model/location","model/location_collection","view/location_view","view/interests_view","view/navbar_view","view/interest_matcher","view/loading_view","text!template/brown_bag.html","view/tab_controller"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d){var v;return v=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(p),r.prototype.initialize=function(){var t,n;return this.selected="t0",e.bindAll(this),this.number=1,this.bindEvents(),this._preRender(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=document.getElementById("body"),t.className="3",console.log(t),n=new l({model:this.user})},r.prototype.bindEvents=function(){var e,t,n,r,i,s;this.$el.undelegate("#interest"),this.$el.undelegate("#match");for(n=i=0;i<4;n=++i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={},t["change #interest"]="set",t[""+e+" #match"]="callInterestMatcher";for(n=s=0;s<4;n=++s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new h({model:new s({message:"rendering brown bag"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.location=new o,this.location.set("id",this.user.get("email")),this.locationPromise=this.location.fetch(),this.locationPromise.done(this.render)},r.prototype.render=function(){return console.log(this.location.get("interest")),console.log(this.location.get("email")),console.log(this.location.get("is_admin")),this.$el.html(this.template(this.location.toJSON())),this.renderLocationList(),this.location.get("is_admin")==="1"&&this.renderMatch(),this.createTabs()},r.prototype.renderLocationList=function(){var e;return this.interestCollection=new u,e=new f({model:this.interestCollection})},r.prototype.renderMatch=function(){return console.log("fadsf"),$("#button").append('<button id="match"> match </button>')},r.prototype.set=function(e){var t;return this.$("#changed").text("changed!"),t=$(e.target).val(),console.log(t),this.location.set({interest:t,last_modify:Date.now()}),this.location.save(),this.$("#changed").text(t)},r.prototype.callInterestMatcher=function(){var e;return e=new c({model:this.interestCollection})},r.prototype.createTabs=function(){var e;return e=new d({model:this.number})},r.prototype.tabSelected=function(){var e,t;if(event.target.id!==this.selected&&event.target.className!=="x_icon"&&event.target.className!=="tab_default_x")return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id},r}(n.View)})}).call(this)