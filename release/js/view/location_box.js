(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){var t;return e.bindAll(this),this.r=Raphael("holder2"),this.rect=this.r.rect(0,0,20,20),this.rect.attr({fill:"#c45b5b",stroke:"",opacity:.8,r:2}),this.isInflated=!1,this.popText=this.r.text(0,0,"0"),this.popText.attr({fill:"#fff","font-size":18,"font-family":"Helvetica Neue","font-weight":"bold","text-anchor":"start","line-height":"190px"}),this.popText.node.lineHeight="50px",t=this,this.popText.node.onclick=function(){return t.flateBox()},this.rect.node.onclick=function(){return t.flateBox()},console.log("initialize")},r.prototype.renderBox=function(e,t,n,r){return console.log("reached render, with "+e+" "+t),this.popText.animate({x:e,y:t},0,"backOut"),this.popText.attr({text:n}),this.x=e-4,this.y=t-11,this.width=this.popText.getBBox().width+7,this.height=this.popText.getBBox().height,this.number=n,this.list=r,this.rect.animate({x:this.x,y:this.y,width:this.width,height:this.height},0,"backOut")},r.prototype.flateBox=function(){var e,t,n,r,i,s;if(this.isInflated)return this.rect.animate({width:this.width,height:this.height,x:this.x,y:this.y},100,"backOut"),this.popText.attr({text:this.number}),this.popText.animate({x:this.x+4}),this.isInflated=!1;if(this.number>0)return this.popText.attr({text:this.list}),t=this.popText.getBBox().width+8,e=this.popText.getBBox().height+5,r=this.y+this.height/2-e/2,n=this.x,console.log(i=r+t),console.log(s=r+e),i>320&&(n=320-t-10),this.rect.animate({width:t,height:e,x:n,y:r},100,"backOut"),this.popText.animate({x:n+4}),this.isInflated=!0},r}(n.View)})}).call(this)