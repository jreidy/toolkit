// Underscore.js 1.3.2
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*
 RequireJS text 0.27.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/* Zepto v1.0rc1 - polyfill zepto event detect fx ajax form touch - zeptojs.com/license */

/*
Simply Deferred - v.1.1.2
(c) 2012 Sudhir Jonathan, contact.me@sudhirjonathan.com
Released under the MIT License.
*/

// moment.js
// version : 1.6.2
// author : Tim Wood
// license : MIT
// momentjs.com

(function(){function e(t,n,r){if(t===n)return t!==0||1/t==1/n;if(t==null||n==null)return t===n;t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped);if(t.isEqual&&E.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&E.isFunction(n.isEqual))return n.isEqual(t);var i=a.call(t);if(i!=a.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:t==0?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if(typeof t!="object"||typeof n!="object")return!1;for(var s=r.length;s--;)if(r[s]==t)return!0;r.push(t);var s=0,o=!0;if(i=="[object Array]"){if(s=t.length,o=s==n.length)for(;s--;)if(!(o=s in t==s in n&&e(t[s],n[s],r)))break}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var u in t)if(E.has(t,u)&&(s++,!(o=E.has(n,u)&&e(t[u],n[u],r))))break;if(o){for(u in n)if(E.has(n,u)&&!(s--))break;o=!s}}return r.pop(),o}var t=this,n=t._,r={},i=Array.prototype,s=Object.prototype,o=i.slice,u=i.unshift,a=s.toString,f=s.hasOwnProperty,l=i.forEach,c=i.map,h=i.reduce,p=i.reduceRight,d=i.filter,v=i.every,m=i.some,g=i.indexOf,y=i.lastIndexOf,s=Array.isArray,b=Object.keys,w=Function.prototype.bind,E=function(e){return new _(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.3.2";var S=E.each=E.forEach=function(e,t,n){if(e!=null)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===r)break}else for(i in e)if(E.has(e,i)&&t.call(n,e[i],i,e)===r)break};E.map=E.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(S(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},E.reduce=E.foldl=E.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=E.bind(t,r)),i?e.reduce(t,n):e.reduce(t);S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},E.reduceRight=E.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=E.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=E.toArray(e).reverse();return r&&!i&&(t=E.bind(t,r)),i?E.reduce(s,t,n,r):E.reduce(s,t)},E.find=E.detect=function(e,t,n){var r;return x(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},E.filter=E.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},E.reject=function(e,t,n){var r=[];return e==null?r:(S(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},E.every=E.all=function(e,t,n){var i=!0;return e==null?i:v&&e.every===v?e.every(t,n):(S(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),!!i)};var x=E.some=E.any=function(e,t,n){t||(t=E.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,n):(S(e,function(e,s,o){if(i||(i=t.call(n,e,s,o)))return r}),!!i)};E.include=E.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:n=x(e,function(e){return e===t})},E.invoke=function(e,t){var n=o.call(arguments,2);return E.map(e,function(e){return(E.isFunction(t)?t||e:e[t]).apply(e,n)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.max=function(e,t,n){if(!t&&E.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-Infinity;var r={computed:-Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},E.min=function(e,t,n){if(!t&&E.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return Infinity;var r={computed:Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},E.shuffle=function(e){var t=[],n;return S(e,function(e,r){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},E.sortBy=function(e,t,n){var r=E.isFunction(t)?t:function(e){return e[t]};return E.pluck(E.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},E.groupBy=function(e,t){var n={},r=E.isFunction(t)?t:function(e){return e[t]};return S(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},E.sortedIndex=function(e,t,n){n||(n=E.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},E.toArray=function(e){return e?E.isArray(e)?o.call(e):E.isArguments(e)?o.call(e):e.toArray&&E.isFunction(e.toArray)?e.toArray():E.values(e):[]},E.size=function(e){return E.isArray(e)?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},E.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},E.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},E.rest=E.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},E.compact=function(e){return E.filter(e,function(e){return!!e})},E.flatten=function(e,t){return E.reduce(e,function(e,n){return E.isArray(n)?e.concat(t?n:E.flatten(n)):(e[e.length]=n,e)},[])},E.without=function(e){return E.difference(e,o.call(arguments,1))},E.uniq=E.unique=function(e,t,n){var n=n?E.map(e,n):e,r=[];return e.length<3&&(t=!0),E.reduce(n,function(n,i,s){if(t?E.last(n)!==i||!n.length:!E.include(n,i))n.push(i),r.push(e[s]);return n},[]),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=E.intersect=function(e){var t=o.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=E.flatten(o.call(arguments,1),!0);return E.filter(e,function(e){return!E.include(t,e)})},E.zip=function(){for(var e=o.call(arguments),t=E.max(E.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,""+r);return n},E.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=E.sortedIndex(e,t),e[n]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(n in e&&e[n]===t)return n;return-1},E.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},E.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0);for(var n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};var T=function(){};E.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,o.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=o.call(arguments,2),n=function(){if(this instanceof n){T.prototype=e.prototype;var i=new T,s=e.apply(i,r.concat(o.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(o.call(arguments)))}},E.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var n={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return E.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},E.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(o.call(arguments,1)))},E.throttle=function(e,t){var n,r,i,s,o,u,a=E.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f;return i||(i=setTimeout(function(){i=null,o&&e.apply(n,r),a()},t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},E.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments;n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,s)},t)}},E.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},E.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},E.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},E.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)E.has(e,n)&&(t[t.length]=n);return t},E.values=function(e){return E.map(e,E.identity)},E.functions=E.methods=function(e){var t=[],n;for(n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},E.pick=function(e){var t={};return S(E.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},E.defaults=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isEqual=function(t,n){return e(t,n,[])},E.isEmpty=function(e){if(e==null)return!0;if(E.isArray(e)||E.isString(e))return e.length===0;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!!e&&e.nodeType==1},E.isArray=s||function(e){return a.call(e)=="[object Array]"},E.isObject=function(e){return e===Object(e)},E.isArguments=function(e){return a.call(e)=="[object Arguments]"},E.isArguments(arguments)||(E.isArguments=function(e){return!!e&&!!E.has(e,"callee")}),E.isFunction=function(e){return a.call(e)=="[object Function]"},E.isString=function(e){return a.call(e)=="[object String]"},E.isNumber=function(e){return a.call(e)=="[object Number]"},E.isFinite=function(e){return E.isNumber(e)&&isFinite(e)},E.isNaN=function(e){return e!==e},E.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},E.isDate=function(e){return a.call(e)=="[object Date]"},E.isRegExp=function(e){return a.call(e)=="[object RegExp]"},E.isNull=function(e){return e===null},E.isUndefined=function(e){return e===void 0},E.has=function(e,t){return f.call(e,t)},E.noConflict=function(){return t._=n,this},E.identity=function(e){return e},E.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},E.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},E.result=function(e,t){if(e==null)return null;var n=e[t];return E.isFunction(n)?n.call(e):n},E.mixin=function(e){S(E.functions(e),function(t){P(t,E[t]=e[t])})};var N=0;E.uniqueId=function(e){var t=N++;return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,k={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"},L;for(L in k)k[k[L]]=L;var A=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,M=function(e){return e.replace(O,function(e,t){return k[t]})};E.template=function(e,t,n){n=E.extend(E.templateSettings,n),e="__p+='"+e.replace(A,function(e){return"\\"+k[e]}).replace(n.escape||C,function(e,t){return"'+\n_.escape("+M(t)+")+\n'"}).replace(n.interpolate||C,function(e,t){return"'+\n("+M(t)+")+\n'"}).replace(n.evaluate||C,function(e,t){return"';\n"+M(t)+"\n;__p+='"})+"';\n",n.variable||(e="with(obj||{}){\n"+e+"}\n");var e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n",r=new Function(n.variable||"obj","_",e);return t?r(t,E):(t=function(e){return r.call(this,e,E)},t.source="function("+(n.variable||"obj")+"){\n"+e+"}",t)},E.chain=function(e){return E(e).chain()};var _=function(e){this._wrapped=e};E.prototype=_.prototype;var D=function(e,t){return t?E(e).chain():e},P=function(e,t){_.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),D(t.apply(E,e),this._chain)}};E.mixin(E),S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(e){var t=i[e];_.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],D(n,this._chain)}}),S(["concat","join","slice"],function(e){var t=i[e];_.prototype[e]=function(){return D(t.apply(this._wrapped,arguments),this._chain)}}),_.prototype.chain=function(){return this._chain=!0,this},_.prototype.value=function(){return this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return E})}).call(this),function(e,t){typeof exports!="undefined"?t(e,exports,require("underscore")):typeof define=="function"&&define.amd?(dol=e.jQuery?"jquery":"zepto",define("backbone",["underscore",dol,"exports"],function(n,r,i){e.Backbone=t(e,i,n,r)})):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender)}(this,function(e,t,n,r){var i=e.Backbone,s=Array.prototype.slice,o=Array.prototype.splice;t.VERSION="0.9.2",t.setDomLibrary=function(e){r=e},t.noConflict=function(){return e.Backbone=i,t},t.emulateHTTP=!1,t.emulateJSON=!1;var u=/\s+/,a=t.Events={on:function(e,t,n){var r,i,s,o,a;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())a=r[i],s=a?a.tail:{},s.next=o={},s.context=n,s.callback=t,r[i]={tail:o,next:a?a.next:s};return this},off:function(e,t,r){var i,s,o,a,f,l;if(!(s=this._callbacks))return;if(!(e||t||r))return delete this._callbacks,this;e=e?e.split(u):n.keys(s);while(i=e.shift()){o=s[i],delete s[i];if(!o||!t&&!r)continue;a=o.tail;while((o=o.next)!==a)f=o.callback,l=o.context,(t&&f!==t||r&&l!==r)&&this.on(i,f,l)}return this},trigger:function(e){var t,n,r,i,o,a,f;if(!(r=this._callbacks))return this;a=r.all,e=e.split(u),f=s.call(arguments,1);while(t=e.shift()){if(n=r[t]){i=n.tail;while((n=n.next)!==i)n.callback.apply(n.context||this,f)}if(n=a){i=n.tail,o=[t].concat(f);while((n=n.next)!==i)n.callback.apply(n.context||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=t.Model=function(e,t){var r;e||(e={}),t&&t.parse&&(e=this.parse(e));if(r=C(this,"defaults"))e=n.extend({},r,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=n.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=n.clone(this.attributes),this.initialize.apply(this,arguments)};n.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var r=this.get(e);return this._escapedAttributes[e]=n.escape(r==null?"":""+r)},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o;n.isObject(e)||e==null?(i=e,r=t):(i={},i[e]=t),r||(r={});if(!i)return this;i instanceof f&&(i=i.attributes);if(r.unset)for(s in i)i[s]=void 0;if(!this._validate(i,r))return!1;this.idAttribute in i&&(this.id=i[this.idAttribute]);var u=r.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(s in i){o=i[s];if(!n.isEqual(a[s],o)||r.unset&&n.has(a,s))delete l[s],(r.silent?this._silent:u)[s]=!0;r.unset?delete a[s]:a[s]=o,!n.isEqual(c[s],o)||n.has(a,s)!=n.has(c,s)?(this.changed[s]=o,r.silent||(this._pending[s]=!0)):(delete this.changed[s],delete this._pending[s])}return r.silent||this.change(r),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(n.clone(this.attributes),e)},fetch:function(e){e=e?n.clone(e):{};var r=this,i=e.success;return e.success=function(t,n,s){if(!r.set(r.parse(t,s),e))return!1;i&&i(r,t)},e.error=t.wrapError(e.error,r,e),(this.sync||t.sync).call(this,"read",this,e)},save:function(e,r,i){var s,o;n.isObject(e)||e==null?(s=e,i=r):(s={},s[e]=r),i=i?n.clone(i):{};if(i.wait){if(!this._validate(s,i))return!1;o=n.clone(this.attributes)}var u=n.extend({},i,{silent:!0});if(s&&!this.set(s,i.wait?u:i))return!1;var a=this,f=i.success;i.success=function(e,t,r){var o=a.parse(e,r);i.wait&&(delete i.wait,o=n.extend(s||{},o));if(!a.set(o,i))return!1;f?f(a,e):a.trigger("sync",a,e,i)},i.error=t.wrapError(i.error,a,i);var l=this.isNew()?"create":"update",c=(this.sync||t.sync).call(this,l,this,i);return i.wait&&this.set(o,u),c},destroy:function(e){e=e?n.clone(e):{};var r=this,i=e.success,s=function(){r.trigger("destroy",r,r.collection,e)};if(this.isNew())return s(),!1;e.success=function(t){e.wait&&s(),i?i(r,t):r.trigger("sync",r,t,e)},e.error=t.wrapError(e.error,r,e);var o=(this.sync||t.sync).call(this,"delete",this,e);return e.wait||s(),o},url:function(){var e=C(this,"urlRoot")||C(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var r in this._silent)this._pending[r]=!0;var i=n.extend({},e.changes,this._silent);this._silent={};for(var r in i)this.trigger("change:"+r,this,this.get(r),e);if(t)return this;while(!n.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var r in this.changed){if(this._pending[r]||this._silent[r])continue;delete this.changed[r]}this._previousAttributes=n.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?n.has(this.changed,e):!n.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._previousAttributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validate(e,t);return r?(t&&t.error?t.error(this,r,t):this.trigger("error",this,r,t),!1):!0}});var l=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};n.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var r,i,s,u,a,f,l={},c={},h=[];t||(t={}),e=n.isArray(e)?e.slice():[e];for(r=0,s=e.length;r<s;r++){if(!(u=e[r]=this._prepareModel(e[r],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(r);continue}l[a]=c[f]=u}r=h.length;while(r--)e.splice(h[r],1);for(r=0,s=e.length;r<s;r++)(u=e[r]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=s,i=t.at!=null?t.at:this.models.length,o.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(r=0,s=this.models.length;r<s;r++){if(!l[(u=this.models[r]).cid])continue;t.index=r,u.trigger("add",u,this,t)}return this},remove:function(e,t){var r,i,s,o;t||(t={}),e=n.isArray(e)?e.slice():[e];for(r=0,i=e.length;r<i;r++){o=this.getByCid(e[r])||this.get(e[r]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,t.silent||(t.index=s,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return n.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=n.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return n.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r]);return this._reset(),this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?n.clone(e):{},e.parse===undefined&&(e.parse=!0);var r=this,i=e.success;return e.success=function(t,n,s){r[e.add?"add":"reset"](r.parse(t,s),e),i&&i(r,t)},e.error=t.wrapError(e.error,r,e),(this.sync||t.sync).call(this,"read",this,e)},create:function(e,t){var r=this;t=t?n.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||r.add(e,t);var i=t.success;return t.success=function(n,s,o){t.wait&&r.add(n,t),i?i(n,s):n.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return n(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){t||(t={});if(e instanceof f)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];n.each(c,function(e){l.prototype[e]=function(){return n[e].apply(n,[this.models].concat(n.toArray(arguments)))}});var h=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,d=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;n.extend(h.prototype,a,{initialize:function(){},route:function(e,r,i){return t.history||(t.history=new m),n.isRegExp(e)||(e=this._routeToRegExp(e)),i||(i=this[r]),t.history.route(e,n.bind(function(n){var s=this._extractParameters(e,n);i&&i.apply(this,s),this.trigger.apply(this,["route:"+r].concat(s)),t.history.trigger("route",this,r,s)},this)),this},navigate:function(e,n){t.history.navigate(e,n)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(v,"\\$&").replace(p,"([^/]+)").replace(d,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;m.started=!1,n.extend(m.prototype,a,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=n.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),i=document.documentMode,s=y.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);s&&(this.iframe=r('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?r(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?r(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var o=window.location,u=o.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&o.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){r(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t==this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),r=n.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return r},navigate:function(e,t){if(!m.started)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(g,"");if(this.fragment==n)return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=t.View=function(e){this.cid=n.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName"];n.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var i=document.createElement(e);return t&&r(i).attr(t),n!=null&&r(i).html(n),i},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof r?e:r(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=C(this,"events")))return;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)throw new Error('Method "'+e[t]+'" does not exist');var i=t.match(w),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.bind(s,r):this.$el.delegate(o,s,r)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=n.extend({},this.options,e));for(var t=0,r=E.length;t<r;t++){var i=E[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(!this.el){var e=C(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var S=function(e,t){var n=N(this,e,t);return n.extend=this.extend,n};f.extend=l.extend=h.extend=b.extend=S;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};t.sync=function(e,i,s){var o=x[e];s||(s={});var u={type:o,dataType:"json"};return s.url||(u.url=C(i,"url")||k()),!s.data&&i&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(i.toJSON())),t.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),t.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(t.emulateJSON&&(u.data._method=o),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),u.type!=="GET"&&!t.emulateJSON&&(u.processData=!1),r.ajax(n.extend(u,s))},t.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var T=function(){},N=function(e,t,r){var i;return t&&t.hasOwnProperty("constructor")?i=t.constructor:i=function(){e.apply(this,arguments)},n.extend(i,e),T.prototype=e.prototype,i.prototype=new T,t&&n.extend(i.prototype,t),r&&n.extend(i,r),i.prototype.constructor=i,i.__super__=e.prototype,i},C=function(e,t){return!e||!e[t]?null:n.isFunction(e[t])?e[t]():e[t]},k=function(){throw new Error('A "url" property or function must be specified')};return t}),define("backbone_localStorage",["underscore","backbone"],function(e,t){function n(){return((1+Math.random())*65536|0).toString(16).substring(1)}function r(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}t.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.data=t&&JSON.parse(t)||{}},e.extend(t.LocalStorage.prototype,{save:function(){localStorage.setItem(this.name,JSON.stringify(this.data))},create:function(e){return e.id||(e.id=e.attributes.id=r()),this.data[e.id]=e,this.save(),e},update:function(e){return this.data[e.id]=e,this.save(),e},find:function(e){return this.data[e.id]},findAll:function(){return e.values(this.data)},destroy:function(e){return delete this.data[e.id],this.save(),e},localStorage:function(){return localStorage}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,t,n,r){var i=t.localStorage||t.collection.localStorage;typeof n=="function"&&(n={success:n,error:r});var s;switch(e){case"read":s=t.id!=undefined?i.find(t):i.findAll();break;case"create":s=i.create(t);break;case"update":s=i.update(t);break;case"delete":s=i.destroy(t)}s?n.success(s):n.error("Record not found")},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,n,r,i){return t.getSyncMethod(n).apply(this,[e,n,r,i])}}),function(){define("util/util",[],function(){var e;return e={loc:window.location,debug:function(){if(window.console)return window.console.log(Array.prototype.slice.call(arguments))},observing:function(t){return t.on("all",function(n){return e.debug(t,n)})}},e})}.call(this),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"0.27.0",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),define("text!template/loading.html",[],function(){return'<div class="spinner_container">\n	<div id= "spinner" class="spinner"></div>\n</div>\n<div class="spinner_box"></div>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/loading_view",["underscore","backbone","util/util","text!template/loading.html"],function(e,n,r,i){var s;return s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=".loading_container",r.prototype.template=e.template(i),r.prototype.initialize=function(){return this._preRender()},r.prototype._preRender=function(){var e;return this.$el.html(this.template),e=function(e){var t={lines:13,length:0,width:6,radius:13,corners:1,rotate:0,color:"white",speed:1.3,trail:39,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9},n=document.getElementById("spinner"),r=(new Spinner(t)).spin(n)},e("hallo")},r.prototype.empty=function(){return this.$el.html("")},r}(n.View),s})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/index_view",["underscore","backbone","view/loading_view"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.router=window.EngApp.appRouter,this.preloadImages(),this.forward()},n.prototype.preloadImages=function(){var e,t,n,r,i,s;console.log,t=["../img/tabTestLight@2x.png","../img/tabTestSelected@2x.png","../img/tabTest@2x.png","../img/tabTopLight.png","../img/tabTopFirst.png","../img/tabTopDark.png","../img/xSmall.png","../img/dashedLine.png","../img/beaconIcon.png","../img/kpiIcon.png","../img/brownBagIcon.png","../img/projectIcon.png"],n=[],s=[];for(e=r=0,i=t.length;0<=i?r<i:r>i;e=0<=i?++r:--r)console.log(e),n[e]=new Image,s.push(n[e].src=t[e]);return s},n.prototype.forward=function(){return this.router.navigate("/#beacon")},n}(n.View),i})}.call(this),function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(this===void 0||this===null)throw new TypeError;var n=Object(this),r=n.length>>>0,i=0,s;if(typeof t!="function")throw new TypeError;if(r==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)s=arguments[1];else do{if(i in n){s=n[i++];break}if(++i>=r)throw new TypeError}while(!0);while(i<r)i in n&&(s=t.call(e,s,n[i],i,n)),i++;return s})}();var Zepto=function(){function C(e){return E.call(e)=="[object Function]"}function k(e){return e instanceof Object}function L(t){var n,r;if(E.call(t)!=="[object Object]")return!1;r=C(t.constructor)&&t.constructor.prototype;if(!r||!hasOwnProperty.call(r,"isPrototypeOf"))return!1;for(n in t);return n===e||hasOwnProperty.call(t,n)}function A(e){return e instanceof Array}function O(e){return typeof e.length=="number"}function M(t){return t.filter(function(t){return t!==e&&t!==null})}function _(e){return e.length>0?[].concat.apply([],e):e}function D(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function P(e){return e in a?a[e]:a[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function H(e,t){return typeof t=="number"&&!l[D(e)]?t+"px":t}function B(e){var t,n;return u[e]||(t=o.createElement(e),o.body.appendChild(t),n=f(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),u[e]=n),u[e]}function j(t,r){return r===e?n(t):n(t).filter(r)}function F(e,t,n,r){return C(t)?t.call(e,n,r):t}function I(e,t,r){var i=e%2?t:t.parentNode;i?i.insertBefore(r,e?e==1?i.firstChild:e==2?t:null:t.nextSibling):n(r).remove()}function q(e,t){t(e);for(var n in e.childNodes)q(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=window.document,u={},a={},f=o.defaultView.getComputedStyle,l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=[1,3,8,9,11],p=["after","prepend","before","append"],d=o.createElement("table"),v=o.createElement("tr"),m={tr:o.createElement("tbody"),tbody:d,thead:d,tfoot:d,td:v,th:v,"*":o.createElement("div")},g=/complete|loaded|interactive/,y=/^\.([\w-]+)$/,b=/^#([\w-]+)$/,w=/^[\w-]+$/,E={}.toString,S={},x,T,N=o.createElement("div");return S.matches=function(e,t){if(!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=N).appendChild(e),r=~S.qsa(i,t).indexOf(e),s&&N.removeChild(e),r},x=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},T=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},S.fragment=function(t,r){r===e&&(r=c.test(t)&&RegExp.$1),r in m||(r="*");var i=m[r];return i.innerHTML=""+t,n.each(s.call(i.childNodes),function(){i.removeChild(this)})},S.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},S.isZ=function(e){return e instanceof S.Z},S.init=function(t,r){if(!t)return S.Z();if(C(t))return n(o).ready(t);if(S.isZ(t))return t;var i;if(A(t))i=M(t);else if(L(t))i=[n.extend({},t)],t=null;else if(h.indexOf(t.nodeType)>=0||t===window)i=[t],t=null;else if(c.test(t))i=S.fragment(t.trim(),RegExp.$1),t=null;else{if(r!==e)return n(r).find(t);i=S.qsa(o,t)}return S.Z(i,t)},n=function(e,t){return S.init(e,t)},n.extend=function(n){return s.call(arguments,1).forEach(function(r){for(t in r)r[t]!==e&&(n[t]=r[t])}),n},S.qsa=function(e,t){var n;return e===o&&b.test(t)?(n=e.getElementById(RegExp.$1))?[n]:i:e.nodeType!==1&&e.nodeType!==9?i:s.call(y.test(t)?e.getElementsByClassName(RegExp.$1):w.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},n.isFunction=C,n.isObject=k,n.isArray=A,n.isPlainObject=L,n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.trim=function(e){return e.trim()},n.uuid=0,n.map=function(e,t){var n,r=[],i,s;if(O(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return _(r)},n.each=function(e,t){var n,r;if(O(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,indexOf:i.indexOf,concat:i.concat,map:function(e){return n.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return g.test(o.readyState)?e(n):o.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return n([].filter.call(this,function(t){return S.matches(t,e)}))},add:function(e,t){return n(T(this.concat(n(e,t))))},is:function(e){return this.length>0&&S.matches(this[0],e)},not:function(t){var r=[];if(C(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):O(t)&&C(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!k(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!k(e)?e:n(e)},find:function(e){var t;return this.length==1?t=S.qsa(this[0],e):t=this.map(function(){return S.qsa(this,e)}),n(t)},closest:function(e,t){var r=this[0];while(r&&!S.matches(r,e))r=r!==t&&r!==o&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&e!==o&&t.indexOf(e)<0)return t.push(e),e});return j(t,e)},parent:function(e){return j(T(this.pluck("parentNode")),e)},children:function(e){return j(this.map(function(){return s.call(this.children)}),e)},siblings:function(e){return j(this.map(function(e,t){return s.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),f(this,"").getPropertyValue("display")=="none"&&(this.style.display=B(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){n(this).wrapAll(n(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(n(this[0]).before(e=n(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return n(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return(t===e?this.css("display")=="none":t)?this.show():this.hide()},prev:function(){return n(this.pluck("previousElementSibling"))},next:function(){return n(this.pluck("nextElementSibling"))},html:function(t){return t===e?this.length>0?this[0].innerHTML:null:this.each(function(e){var r=this.innerHTML;n(this).empty().append(F(this,t,e,r))})},text:function(t){return t===e?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(k(n))for(t in n)this.setAttribute(t,n[t]);else this.setAttribute(n,F(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&this.removeAttribute(e)})},prop:function(t,n){return n===e?this[0]?this[0][t]:e:this.each(function(e){this[t]=F(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+D(t),n);return r!==null?r:e},val:function(t){return t===e?this.length>0?this[0].value:e:this.each(function(e){this.value=F(this,t,e,this.value)})},offset:function(){if(this.length==0)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(n,r){if(r===e&&typeof n=="string")return this.length==0?e:this[0].style[x(n)]||f(this[0],"").getPropertyValue(n);var i="";for(t in n)typeof n[t]=="string"&&n[t]==""?this.each(function(){this.style.removeProperty(D(t))}):i+=D(t)+":"+H(t,n[t])+";";return typeof n=="string"&&(r==""?this.each(function(){this.style.removeProperty(D(n))}):i=D(n)+":"+H(n,r)),this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return this.length<1?!1:P(e).test(this[0].className)},addClass:function(e){return this.each(function(t){r=[];var i=this.className,s=F(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&(this.className+=(i?" ":"")+r.join(" "))})},removeClass:function(t){return this.each(function(n){if(t===e)return this.className="";r=this.className,F(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(P(e)," ")}),this.className=r.trim()})},toggleClass:function(t,r){return this.each(function(i){var s=F(this,t,i,this.className);(r===e?!n(this).hasClass(s):r)?n(this).addClass(s):n(this).removeClass(s)})}},["width","height"].forEach(function(t){n.fn[t]=function(r){var i,s=t.replace(/./,function(e){return e[0].toUpperCase()});return r===e?this[0]==window?window["inner"+s]:this[0]==o?o.documentElement["offset"+s]:(i=this.offset())&&i[t]:this.each(function(e){var i=n(this);i.css(t,F(this,r,e,i[t]()))})}}),p.forEach(function(e,t){n.fn[e]=function(){var e=n.map(arguments,function(e){return k(e)?e:S.fragment(e)});if(e.length<1)return this;var r=this.length,i=r>1,s=t<2;return this.each(function(n,o){for(var u=0;u<e.length;u++){var a=e[s?e.length-u-1:u];q(a,function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&window.eval.call(window,e.innerHTML)}),i&&n<r-1&&(a=a.cloneNode(!0)),I(t,o,a)}})},n.fn[t%2?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),S.Z.prototype=n.fn,S.camelize=x,S.uniq=T,n.zepto=S,n}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function s(e){return e._zid||(e._zid=r++)}function o(e,t,r,i){t=u(t);if(t.ns)var o=a(t.ns);return(n[s(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!r||s(e.fn)===s(r))&&(!i||e.sel==i)})}function u(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function f(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function l(t,r,i,o,a,l){l=!!l;var c=s(t),h=n[c]||(n[c]=[]);f(r,i,function(n,r){var i=a&&a(r,n),s=i||r,f=function(e){var n=s.apply(t,[e].concat(e.data));return n===!1&&e.preventDefault(),n},c=e.extend(u(n),{fn:r,proxy:f,sel:o,del:i,i:h.length});h.push(c),t.addEventListener(c.e,f,l)})}function c(e,t,r,i){var u=s(e);f(t||"",r,function(t,r){o(e,t,r,i).forEach(function(t){delete n[u][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function v(t){var n=e.extend({originalEvent:t},t);return e.each(d,function(e,r){n[e]=function(){return this[r]=h,t[e].apply(t,arguments)},n[r]=p}),n}function m(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var t=e.zepto.qsa,n={},r=1,i={};i.click=i.mousedown=i.mouseup=i.mousemove="MouseEvents",e.event={add:l,remove:c},e.proxy=function(t,n){if(e.isFunction(t)){var r=function(){return t.apply(n,arguments)};return r._zid=s(t),r}if(typeof n=="string")return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){l(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){c(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){l(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return c(r,t,e),n}})})};var h=function(){return!0},p=function(){return!1},d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){var i=!1;if(n=="blur"||n=="focus")e.iswebkit?n=n=="blur"?"focusout":n=="focus"?"focusin":n:i=!0;return this.each(function(s,o){l(o,n,r,t,function(n){return function(r){var i,s=e(r.target).closest(t,o).get(0);if(s)return i=e.extend(v(r),{currentTarget:s,liveFired:o}),n.apply(s,[i].concat([].slice.call(arguments,1)))}},i)})},e.fn.undelegate=function(e,t,n){return this.each(function(){c(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return n==undefined||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return n==undefined||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){return typeof t=="string"&&(t=e.Event(t)),m(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(s,u){r=v(typeof t=="string"?e.Event(t):t),r.data=n,r.target=u,e.each(o(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(n){}return this}}),e.Event=function(e,t){var n=document.createEvent(i[e]||"Events"),r=!0;if(t)for(var s in t)s=="bubbles"?r=!!t[s]:n[s]=t[s];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),a=u&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),c=e.match(/(BlackBerry).*Version\/([\d.]+)/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]),o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),u&&(t.webos=!0,t.version=u[2]),a&&(t.touchpad=!0),c&&(t.blackberry=!0,t.version=c[2]),f&&(t.kindle=!0,t.version=f[1]),l&&(n.silk=!0,n.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function c(e){return e.toLowerCase()}function h(e){return r?r+e:c(e)}var n="",r,i,s,o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},u=window.document,a=u.createElement("div"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l={};e.each(o,function(e,i){if(a.style[e+"TransitionProperty"]!==t)return n="-"+c(e)+"-",r=i,!1}),l[n+"transition-property"]=l[n+"transition-duration"]=l[n+"transition-timing-function"]=l[n+"animation-name"]=l[n+"animation-duration"]="",e.fx={off:r===t&&a.style.transitionProperty===t,cssPrefix:n,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")},e.fn.animate=function(t,n,r,i){return e.isObject(n)&&(r=n.easing,i=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,r,i)},e.fn.anim=function(r,i,s,o){var u,a={},c,h=this,p,d=e.fx.transitionEnd;i===t&&(i=.4),e.fx.off&&(i=0);if(typeof r=="string")a[n+"animation-name"]=r,a[n+"animation-duration"]=i+"s",d=e.fx.animationEnd;else{for(c in r)f.test(c)?(u||(u=[]),u.push(c+"("+r[c]+")")):a[c]=r[c];u&&(a[n+"transform"]=u.join(" ")),!e.fx.off&&typeof r=="object"&&(a[n+"transition-property"]=Object.keys(r).join(", "),a[n+"transition-duration"]=i+"s",a[n+"transition-timing-function"]=s||"linear")}return p=function(t){if(typeof t!="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(d,arguments.callee)}e(this).css(l),o&&o.call(this)},i>0&&this.bind(d,p),setTimeout(function(){h.css(a),i<=0&&setTimeout(function(){h.each(function(){p.call(this)})},0)},0),this},a=null}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.defaultPrevented}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),triggerGlobal(n,r,"ajaxSuccess",[t,n,e]),ajaxComplete(i,t,n)}function ajaxError(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),triggerGlobal(r,i,"ajaxError",[n,r,e]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){isObject(e.data)&&(e.data=$.param(e.data)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data))}function serialize(e,t,n,r){var i=$.isArray(t);$.each(t,function(t,s){r&&(t=n?r:r+"["+(i?"":t)+"]"),!r&&i?e.add(s.name,s.value):(n?$.isArray(s):isObject(s))?serialize(e,s,n,t):e.add(t,s)})}var jsonpID=0,isObject=$.isObject,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e){var t="jsonp"+ ++jsonpID,n=document.createElement("script"),r=function(){$(n).remove(),t in window&&(window[t]=empty),ajaxComplete("abort",i,e)},i={abort:r},s;return e.error&&(n.onerror=function(){i.abort(),e.error()}),window[t]=function(r){clearTimeout(s),$(n).remove(),delete window[t],ajaxSuccess(r,i,e)},serializeData(e),n.src=e.url.replace(/=\?/,"="+t),$("head").append(n),e.timeout>0&&(s=setTimeout(function(){i.abort(),ajaxComplete("timeout",i,e)},e.timeout)),i},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=$.ajaxSettings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(e,t){return $.ajax({url:e,success:t})},$.post=function(e,t,n,r){return $.isFunction(t)&&(r=r||n,n=t,t=null),$.ajax({type:"POST",url:e,data:t,success:n,dataType:r})},$.getJSON=function(e,t){return $.ajax({url:e,success:t,dataType:"json"})},$.fn.load=function(e,t){if(!this.length)return this;var n=this,r=e.split(/\s/),i;return r.length>1&&(e=r[0],i=r[1]),$.get(e,function(e){n.html(i?$(document.createElement("div")).html(e.replace(rscript,"")).find(i).html():e),t&&t.call(n)}),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t=[],n;return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function r(e){return"tagName"in e?e:e.parentNode}function i(e,t,n,r){var i=Math.abs(e-t),s=Math.abs(n-r);return i>=s?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function u(){o=null,t.last&&(t.el.trigger("longTap"),t={})}function a(){o&&clearTimeout(o),o=null}var t={},n,s=750,o;e(document).ready(function(){var f,l;e(document.body).bind("touchstart",function(i){f=Date.now(),l=f-(t.last||f),t.el=e(r(i.touches[0].target)),n&&clearTimeout(n),t.x1=i.touches[0].pageX,t.y1=i.touches[0].pageY,l>0&&l<=250&&(t.isDoubleTap=!0),t.last=f,o=setTimeout(u,s)}).bind("touchmove",function(e){a(),t.x2=e.touches[0].pageX,t.y2=e.touches[0].pageY}).bind("touchend",function(e){a(),t.isDoubleTap?(t.el.trigger("doubleTap"),t={}):t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?(t.el.trigger("swipe")&&t.el.trigger("swipe"+i(t.x1,t.x2,t.y1,t.y2)),t={}):"last"in t&&(t.el.trigger("tap"),n=setTimeout(function(){n=null,t.el.trigger("singleTap"),t={}},250))}).bind("touchcancel",function(){n&&clearTimeout(n),o&&clearTimeout(o),o=n=null,t={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto),define("libs/zepto/zepto",function(){}),function(){var e,t,n,r,i,s,o,u,a,f=[].slice;o=(typeof window!="undefined"&&window!==null?window._:void 0)||require("underscore"),t="pending",r="resolved",n="rejected",s=o.flatten,i=function(e,t){var n,r,i,o,u;o=s(e),u=[];for(r=0,i=o.length;r<i;r++)n=o[r],u.push(n.apply(null,t));return u},e=function(){var e,o,u,a,f,l;return l=t,a=[],f=[],e=[],u={},this.promise=function(o){var c;return o=o||{},o.state=function(){return l},c=function(e,n){return function(){return l===t&&n.push.apply(n,s(arguments)),e()&&i(arguments,u),o}},o.done=c(function(){return l===r},a),o.fail=c(function(){return l===n},f),o.always=c(function(){return l!==t},e),o},this.promise(this),o=function(n,r){return function(){return l===t&&(l=n,u=arguments,i([r,e],u)),this}},this.resolve=o(r,a),this.reject=o(n,f),this},a=function(){var t,n,r,i,u,a;i=new e,n=s(arguments),r=o.after(n.length,i.resolve);for(u=0,a=n.length;u<a;u++)t=n[u],t.done(r);return i.promise()},u=function(t){return t.Deferred=function(){return new e},t.ajax=o.wrap(t.ajax,function(t,n){var r,i;return n==null&&(n={}),i=new e,r=function(e,t){return o.wrap(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?f.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},n.success=r(n.success,i.resolve),n.error=r(n.error,i.reject),t(n),i.promise()}),t.when=a},typeof exports!="undefined"?(exports.Deferred=function(){return new e},exports.when=a,exports.installInto=u):(this.Deferred=function(){return new e},this.Deferred.when=a,this.Deferred.installInto=u)}.call(this),define("libs/zepto/deferred",function(){}),define("zepto",["libs/zepto/zepto","libs/zepto/deferred"],function(){return this.Deferred.installInto(this.Zepto),this.Zepto}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/gauth",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.redirect_uri=""+r.loc.protocol+"//"+r.loc.host,s.prototype.client_id="732956213095-denfv8c10qri71remq4p3d24kgrn7iup.apps.googleusercontent.com",s.prototype.response_type="token",s.prototype.scope="https://spreadsheets.google.com/feeds/+https://docs.google.com/feeds/+https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/userinfo.email",s.prototype.base_url="https://accounts.google.com/o/oauth2/auth",s.prototype.initialize=function(){return this.id="local_auth",this.localStorage=new n.LocalStorage(this.id)},s.prototype.getAuthUrl=function(){var e,t;return e="response_type="+this.response_type+"&client_id="+this.client_id+"&redirect_uri="+this.redirect_uri+"&scope="+this.scope,t=""+this.base_url+"?"+e},s.prototype.parseAuthToken=function(t){var n,r;return n=t.split("&"),r={},e.each(n,function(e){var t;return t=e.split("="),r[t[0]]=t[1]}),r.expired_at=Date.now()+r.expires_in*1e3,this.set(r),this.save()},s.prototype._expired=function(){var e,t;return e=this.get("expired_at"),t=Date.now(),e?e<t:!0},s.prototype.authorized=function(){return this.get("access_token")&&!this._expired()},s}(n.Model),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/user",["underscore","backbone","zepto","util/util","model/gauth"],function(e,n,r,i,s){var o;return o=function(i){function f(){return f.__super__.constructor.apply(this,arguments)}var o,u,a;return t(f,i),u=null,a=null,o=null,f.prototype.url=function(){return"https://www.googleapis.com/oauth2/v2/userinfo?access_token="+o},f.prototype.initialize=function(){return e.bindAll(this),this.id="local_user",this.localStorage=new n.LocalStorage(this.id),this.on("destroy",this.userDestroyed),u=new s,u.on("change:access_token",this.authAccessTokenChanged)},f.prototype.userDestroyed=function(){return u.destroy()},f.prototype.authAccessTokenChanged=function(){var e,t=this;o=u.get("access_token"),this.fetch();if(!(((e=this.get("userName"))!=null?e.length:void 0)>0))return this.load().always(function(e){var n,r;return e!=null&&((r=e["email"])!=null?r.length:void 0)?(n=/(.*)@/.exec(e.email),n&&(e.userName=n[1]),e.uid=e.id,e.id=t.id,t.set(e),t.save()):t.trigger("fetch:error")})},f.prototype.load=function(){return r.ajax({dataType:"jsonp",url:this.url()})},f.prototype.authorized=function(){return u.fetch(),u.authorized()},f.prototype.getAuthUrl=function(){return u.getAuthUrl()},f.prototype.getAccessToken=function(){return u.get("access_token")},f.prototype.isGreeAccount=function(){return this.get("email").indexOf("@gree.co.jp")>0},f}(n.Model),o})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/loading",["backbone"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={message:"",duration:.6},n}(e.Model),n})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/foursquare_location",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}var s;return t(o,i),o.prototype.client_id="JRCYYUZK5Q2GENAPUH2CNW2SG1RNVVBDDTADCOB1BWPQVUFK",o.prototype.client_secret="JKQOKQ2SVHVMO5VOOZQAFG55ZG2Y14EUPL44510SEZZUYMJH",o.prototype.v="20120426",o.prototype.urlRoot="https://api.foursquare.com/v2/venues/search",o.prototype.countryCityMap={China:"Beijing",Japan:"Tokyo","United States":"CB, SF",Argentina:"Buenos Aires"},o.prototype.countryAbbrs={Argentina:"ARG",China:"CN",Japan:"JP","United States":"US"},s={latitude:37.7882888570246,longitude:-122.39682522210278},o.prototype.url=function(){return""+this.urlRoot+"?ll="+this.get("latitude")+","+this.get("longitude")+"&client_id="+this.client_id+"&client_secret="+this.client_secret+"&v="+this.v},o.prototype.initialize=function(){return e.bindAll(this),this.id="foursquare_location",this.localStorage=new n.LocalStorage(this.id)},o.prototype.locate=function(){return this.trigger("locating"),navigator.geolocation.getCurrentPosition(this.getLocationSuccess,this.getLocationFail,{maximumAge:6e4})},o.prototype.getLocationSuccess=function(e){var t,n,r,i,s;r=e.coords.latitude,i=e.coords.longitude,this.fetch(),t=this.get("latitude"),n=this.get("longitude");if(t===void 0||n===void 0||Math.abs(t-r)>.01||Math.abs(n-i)>.01)return this.set(e.coords),s=this.load(),s.done(this.parseResponse),s.fail(this.fetchLocationFromFourSquareFail)},o.prototype.getLocationFail=function(){return this.trigger("setLocation:failed")},o.prototype.fetchLocationFromFourSquareFail=function(){return this.trigger("getLocationName:failed")},o.prototype._parseCity=function(e){return e==="United States"&&s.latitude-this.get("latitude")<=.005?"2nd St., SF":this.countryCityMap[e]},o.prototype.parseResponse=function(e){var t;r.debug("4sq response",e);if(e.meta.code!==200){this.trigger("getLocationName:failed");return}return t=e.response.venues[0].location,this.set({country:t.country,city:this._parseCity(t.country),countryAbbr:this.countryAbbrs[t.country]}),this.save()},o.prototype.load=function(){return $.ajax({dataType:"jsonp",url:this.url()})},o}(n.Model),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/location",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={email:"",home:"",current:"",last_modify:"",status:"",interest:"",has_match:"false",is_admin:"0"},n.prototype.url=function(){return"/locations/"+this.get("id")},n}(n.Model),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/location_collection",["underscore","backbone","util/util","model/location"],function(e,n,r,i){var s;return s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.countryAbbrs={Argentina:"ARG",China:"CN",Japan:"JP","United States":"US"},r.prototype.model=i,r.prototype.url="/locations",r.prototype.comparator=function(e){return""+e.get("isTravelling")+" "+e.get("userName")},r.prototype.parse=function(t){var n=this;return e.map(t,function(e){var t,n,r,i,s,o;return n=e.email,n&&(s=/(.*)@/.exec(n),s&&(e.userName=s[1])),o=[e.current,e.home],t=o[0],r=o[1],e.isTravelling=t===r?"home":"away",i=new Date(parseInt(e.last_modify)),e.lastModifyDayTime=""+i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" "+i.getHours()+":"+i.getMinutes(),e})},r}(n.Collection),s})}.call(this),define("text!template/navbar.html",[],function(){return'\n<div class="tab_top_background"></div>\n<div class="tab_top" id ="tab_top"></div>\n<%if (this.model.get("userName")) {%>\n<table id="user" class="user">\n	<tr>\n		<td>\n			<button class="top_item beacon_icon" id="beacon"></button>\n		</td>\n		<td>	\n	  		<button class="top_item project_icon" id="projects"></button>\n	  	</td>\n		<td>\n	 		<button class="top_item kpi_icon" id="kpis"></button>\n	 	</td>\n		<td>\n	 		<button class="top_item brown_bag_icon" id="brownbag"></button>\n	 	</td>\n<!-- 		<td>\n			<button id="settings" class="settings"></button>\n		</td> -->\n		<td>\n			<button id="logout" class="logout"></button>\n		</td>\n	</tr>\n</table>\n<%}%>\n\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/tab_navigation_controller",["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(t){return e.bindAll(this),this.number=t,this.createTabs()},r.prototype.createTabs=function(){var e,t,n,r,i,s;s=[];for(e=i=0;i<4;e=++i)n=document.createElement("DIV"),n.className="tab_top_dark",n.id="top"+e,t=e*58-15,n.style.marginLeft=t.toString()+"px",r=100-e-1,n.style.zIndex=r.toString(),e===0&&(n.className="tab_top_first"),e===this.number&&(n.style.zIndex="101",n.className="tab_top_light"),s.push($("#tab_top").append(n));return s},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/navbar_view",["underscore","backbone","util/util","model/loading","view/loading_view","text!template/navbar.html","view/tab_navigation_controller"],function(e,n,r,i,s,o,u){var a;return a=function(n){function a(){return a.__super__.constructor.apply(this,arguments)}return t(a,n),a.prototype.el="#navbar",a.prototype.template=e.template(o),a.prototype.initialize=function(){e.bindAll(this),this.bindEvents(),this.router=window.EngApp.appRouter,this.model.on("change:userName",this.showUserName);if(!this.model.authorized())return this.jumpingToGoogleLogin()},a.prototype.bindEvents=function(){var e,t;return this.$el.undelegate("#logout"),this.$el.undelegate("#back"),e="createTouch"in document?"tap":"click",t={},t[""+e+" #beacon"]="navigate",t[""+e+" #projects"]="navigate",t[""+e+" #kpis"]="navigate",t[""+e+" #brownbag"]="navigate",t[""+e+" #logout"]="logout",t[""+e+" #back"]="back",t[""+e+" #settings"]="settings",this.delegateEvents(t)},a.prototype.jumpingToGoogleLogin=function(){var e;return e=new s({model:new i({message:"redirect to google authorization"})}),e.render(),r.loc.href=this.model.getAuthUrl()},a.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this.renderTabs()},a.prototype.renderTabs=function(){var e,t;return e=parseInt(document.getElementById("body").className),t=new u(e)},a.prototype.showUserName=function(){return this.model.isGreeAccount()||(alert("You should use gree account to login this app"),this.logout()),this.render(),this.toggleBackbutton()},a.prototype.toggleBackbutton=function(){var e,t;return e=this.$el.find("#back"),t=r.loc.hash,t.length>1&&t!=="#logout"?e.show():e.hide()},a.prototype.navigate=function(){return console.log(event.target.id),this.router.navigate(event.target.id,{trigger:!0})},a.prototype.logout=function(){if(confirm("Are you sure you want to log out?"))return this.model.destroy(),this.remove(),this.router.navigate("/#logout")},a.prototype.back=function(){var e,t;return e=r.loc.hash,t=e.split("/"),t[0]=t[0].substring(1),t.splice(0,0,""),this.router.navigate(t[t.length-2],{trigger:!0})},a.prototype.settings=function(){var e,t,n;return t="150px",n=document.getElementById("main"),n.style.top===t?(e=function(){$("#main").animate({top:"41px"},100,"toggle")},e()):(e=function(){$("#main").animate({top:t},100)},e()),console.log(n.style.top)},a}(n.View),a})}.call(this),define("text!template/current_location.html",[],function(){return'<div id="location" class="location">\n  <span><%= model.message %></span>\n</div>\n<blockquote class="travel_status">\n  <% if(location.status == null || location.status == "") {%>\n    <p class="current_travel_status not_set_status">\n      Set your travel message...\n    </p>\n  <% } else { %>\n    <p class="current_travel_status">\n      <%= location.status %>\n    </p>  \n  <% } %>\n  <a id="edit_travel_status" class="edit_travel_status" href="#beacon/status"> \n  </a>\n</blockquote>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/location_view",["underscore","backbone","util/util","model/location","text!template/current_location.html"],function(e,n,r,i,s){var o;return o=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#my_current_location",r.prototype.template=e.template(s),r.prototype.initialize=function(t){return e.bindAll(this),this.router=window.EngApp.appRouter,this.location=new i,this.location.set("id",t.locationId),this.locationPromise=this.location.fetch(),this.model.on("locating",this.locating),this.model.on("setLocation:failed getLocationName:failed",this.fail),this.model.on("change:country change:city",this.success),this.model.locate()},r.prototype.render=function(){return this.$el.html(this.template({model:this.model.toJSON(),location:this.location.toJSON()}))},r.prototype.locating=function(){return this.model.set("message","Calculating your location..."),this.render()},r.prototype.fail=function(){return this.model.set("message","Sorry, can't get your location. You may have disallowed location requests for this browser"),this.render()},r.prototype.success=function(){return this.model.set("message","You are in "+this.model.get("city")+", "+this.model.get("countryAbbr")),this.render(),this.updateUserLocation()},r.prototype.updateUserLocation=function(){return this.locationPromise.done(this.getLocationSuccess)},r.prototype.getLocationSuccess=function(){var e=this;return this.location.get("home")?(this.render(),this.location.set({current:""+this.model.get("city")+", "+this.model.get("countryAbbr"),last_modify:Date.now()}),this.location.save().done(function(){return e.trigger("curretLocationReady")})):this.jumpToSetHomePage()},r.prototype.jumpToSetHomePage=function(){return this.router.navigate("settings/home",{trigger:!0})},r}(n.View),o})}.call(this),define("text!template/location.html",[],function(){return'\n<div id="holder2" class="holder2"></div>\n<div id="current_location_image"></div>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/location_box",["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){var t;return e.bindAll(this),this.r=Raphael("holder2"),this.rect=this.r.rect(0,0,20,20),this.rect.attr({fill:"#c45b5b",stroke:"",opacity:.8,r:2}),this.isInflated=!1,this.popText=this.r.text(0,0,"0"),this.popText.attr({fill:"#fff","font-size":18,"font-family":"Helvetica Neue","font-weight":"bold","text-anchor":"start","line-height":"190px"}),this.popText.node.lineHeight="50px",t=this,this.popText.node.onclick=function(){return t.flateBox()},this.rect.node.onclick=function(){return t.flateBox()},console.log("initialize")},r.prototype.renderBox=function(e,t,n,r){return console.log("reached render, with "+e+" "+t),this.popText.animate({x:e,y:t},0,"backOut"),this.popText.attr({text:n}),this.x=e-4,this.y=t-11,this.width=this.popText.getBBox().width+7,this.height=this.popText.getBBox().height,this.number=n,this.list=r,this.rect.animate({x:this.x,y:this.y,width:this.width,height:this.height},0,"backOut")},r.prototype.flateBox=function(){var e,t,n,r,i,s;if(this.isInflated)return this.rect.animate({width:this.width,height:this.height,x:this.x,y:this.y},100,"backOut"),this.popText.attr({text:this.number}),this.popText.animate({x:this.x+4}),this.isInflated=!1;if(this.number>0)return this.popText.attr({text:this.list}),t=this.popText.getBBox().width+8,e=this.popText.getBBox().height+5,r=this.y+this.height/2-e/2,n=this.x,console.log(i=r+t),console.log(s=r+e),i>320&&(n=320-t-10),this.rect.animate({width:t,height:e,x:n,y:r},100,"backOut"),this.popText.animate({x:n+4}),this.isInflated=!0},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/locations_view",["underscore","backbone","text!template/location.html","view/location_box","view/loading_view"],function(e,n,r,i,s){var o;return o=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.el="#locations",o.prototype.template=e.template(r),o.prototype.initialize=function(){return e.bindAll(this),this.bindEvents(),this._preRender(),this.model.on("reset",this.readyForAction),this.model.fetch()},o.prototype.bindEvents=function(){var e,t;return this.$el.undelegate(".has_status"),e="createTouch"in document?"tap":"click",t={},t[""+e+" .has_status"]="showUserStatus",this.delegateEvents(t)},o.prototype.readyForAction=function(){return this.render(),this.loadingView.empty()},o.prototype.render=function(){return this.items=this.model.toJSON(),this.$el.html(this.template),this.header=document.createElement("H3"),this.header.className="location_header",this.$el.append(this.header),this.name=document.createElement("span"),this.name.className="location_name",this.$el.append(this.name),this.pop=document.createElement("p"),this.pop.className="pop",this.locationBox=new i,this.updateLocationView("0")},o.prototype._preRender=function(){return this.loadingView=new s},o.prototype.showUserStatus=function(e){var t,n;return t=$(e.target),n=t.hasClass("has_status")?t.find(".user_status"):t.parents(".has_status").find(".user_status"),alert($.trim(n.html()))},o.prototype.updateLocationView=function(e){var t,n,r,i,s,o,u,a,f,l;r=document.getElementById("current_location_image");switch(e){case"0":u="2nd St., SF, US";break;case"1":u="CB, SF, US";break;case"2":u="Beijing, CN";break;default:u="Tokyo, JP"}f=0,o="",i=!1;for(n in this.items)this.items[n].current===u&&(f++,l=this.items[n].userName,a="",t=l.indexOf(".",0),s=l.lastIndexOf("."),t===s?(a+=l.substring(0,t),a+=" "+l.substring(t+1,l.length)):(a+=l.substring(t+1,s),a+=" "+l.substring(s+1,l.length)),o+=a+"\n");switch(e){case"0":return r.className="cali_orange",this.header.innerHTML="UNITED STATES",this.name.innerHTML="2ND STREET, SF",this.header.style.marginTop="273px",this.name.style.marginTop="296px",this.header.style.marginLeft="40px",this.name.style.marginLeft="41px",this.locationBox.renderBox(85,164,f,o);case"1":return r.className="cali_purple",this.header.innerHTML="UNITED STATES",this.name.innerHTML="CHINA BASIN, SF",this.header.style.marginTop="273px",this.name.style.marginTop="296px",this.header.style.marginLeft="40px",this.name.style.marginLeft="41px",this.locationBox.renderBox(87,165,f,o);case"2":return r.className="china_blue",this.header.innerHTML="CHINA",this.name.innerHTML="BEIJING",this.header.style.marginTop="293px",this.name.style.marginTop="316px",this.header.style.marginLeft="60px",this.name.style.marginLeft="61px",this.locationBox.renderBox(212,158,f,o);default:return r.className="japan_green",this.header.innerHTML="JAPAN",this.name.innerHTML="TOKYO",this.header.style.marginTop="163px",this.name.style.marginTop="186px",this.header.style.marginLeft="50px",this.name.style.marginLeft="51px",this.locationBox.renderBox(210,234,f,o)}},o}(n.View),o})}.call(this),define("text!template/beacon.html",[],function(){return'\n<div class="dashedTopLine" id="topDash"></div>\n<div class="tab_bar" id="tab_bar"></div>\n<div>\n<!--   <div id="my_current_location" class="my_current_location"> \n  </div> -->\n  <div id="locations" class="locations"></div>  \n</div>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/tab_controller",["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){return e.bindAll(this),this.createTabs()},r.prototype.createTabs=function(){var e,t,n,r,i,s,o;console.log(this.model),o=[];for(e=s=0;s<4;e=++s)n=document.createElement("DIV"),n.className="tab_default",n.id="t"+e,t=e*78-15,n.style.marginLeft=t.toString()+"px",i=100-e-1,n.style.zIndex=i.toString(),e===0&&(n.style.zIndex="101",n.className="tab_bar_selected"),$("#tab_bar").append(n),e>=this.model?(r=document.createElement("DIV"),r.className="x_icon",$("#t"+e).append(r),o.push(n.className="tab_default_x")):o.push(void 0);return o},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/beacon_view",["underscore","backbone","util/util","model/user","model/loading","model/foursquare_location","model/location_collection","view/navbar_view","view/loading_view","view/location_view","view/locations_view","text!template/beacon.html","view/tab_controller"],function(e,n,r,i,s,o,u,a,f,l,c,h,p){var d;return d=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(h),r.prototype.initialize=function(){var t,n;return this.number=4,this.selected="t0",e.bindAll(this),this._preRender(),this.bindEvents(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=document.getElementById("body"),t.className="0",console.log(t),n=new a({model:this.user})},r.prototype.bindEvents=function(){var e,t,n,r,i,s;for(n=i=0;i<4;n=++i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={};for(n=s=0;s<4;n=++s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new f,this.loadingView.render(),this.render()},r.prototype.render=function(){return this.$el.html(this.template("")),this.createTabs()},r.prototype.createTabs=function(){var e;return e=new p({model:this.number})},r.prototype.tabSelected=function(){var e,t;if(event.target.id!==this.selected&&event.target.className!=="x_icon"&&event.target.className!=="tab_default_x")return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id,this.locationsView.updateLocationView(this.selected[1])},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.fsLocation=new o,this.locationView=new l({model:this.fsLocation,locationId:this.user.get("email")}),this.locationView.on("curretLocationReady",this.renderLocationList)},r.prototype.renderLocationList=function(){var e;return e=new u,this.locationsView=new c({model:e})},r}(n.View),d})}.call(this),define("text!template/location_home.html",[],function(){return'<p>\n  Please set your home office. When you travel to another office, your location will be highlighted to other peers.\n</p>\n<fieldset class="form-vertical offices">\n  <div class="control-group">\n    <div class="controls docs-input-sizes">\n      <select id="office">\n        <% if(!home) { %>\n          <option>None</option>\n        <% } %>\n        <%= home == "2nd St., SF, US" ? "<option selected=selected>" : "<option>" %>\n          2nd St., SF, US\n        </option>\n        <%= home == "CB, SF, US" ? "<option selected=selected>" : "<option>" %>\n          CB, SF, US\n        </option>\n        <%= home == "Tokyo, JP" ? "<option selected=selected>" : "<option>" %>\n          Tokyo, JP\n        </option>\n        <%= home == "Beijing, CN" ? "<option selected=selected>" : "<option>" %>\n          Beijing, CN\n        </option>\n        <%= home == "Buenos Aires, ARG" ? "<option selected=selected>" : "<option>" %>\n          Buenos Aires, ARG \n        </option>\n      </select>\n    </div>\n  </div>\n</fieldset>\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/location_home_view",["underscore","backbone","util/util","model/user","model/loading","model/location","view/navbar_view","view/loading_view","text!template/location_home.html"],function(e,n,r,i,s,o,u,a,f){var l;return l=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(f),r.prototype.initialize=function(){var t;return e.bindAll(this),this.router=window.EngApp.appRouter,this.bindEvents(),this._preRender(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=new u({model:this.user})},r.prototype.bindEvents=function(){var e;return this.$el.undelegate("#office"),e={},e["change #office"]="set",this.delegateEvents(e)},r.prototype._preRender=function(){return this.loadingView=new a({model:new s({message:"rendering set home location page"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.location=new o,this.location.set("id",this.user.get("email")),this.locationPromise=this.location.fetch(),this.locationPromise.done(this.render)},r.prototype.render=function(){return this.$el.html(this.template(this.location.toJSON()))},r.prototype.set=function(e){var t,n=this;return t=$(e.target).val(),this.location.set({home:t}),this.location.save().done(function(){return n.router.navigate("beacon",{trigger:!0})})},r}(n.View)})}.call(this),define("text!template/travel_status.html",[],function(){return'<textarea id="status" class="status" maxlength="140" placeholder="Set travel msg here, e.g. will be in SF on 5/18"></textarea>\n<div class="status_action">\n  <a id="save" class="save">\n    Save\n  </a>\n</div>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/travel_status_view",["underscore","backbone","util/util","model/user","model/loading","model/location","view/navbar_view","view/loading_view","text!template/travel_status.html"],function(e,n,r,i,s,o,u,a,f){var l;return l=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(f),r.prototype.initialize=function(){var t;return e.bindAll(this),this.bindEvents(),this.router=window.EngApp.appRouter,this._preRender(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=new u({model:this.user})},r.prototype.bindEvents=function(){var e,t;return this.$el.undelegate("#save"),e="createTouch"in document?"tap":"click",t={},t[""+e+" #save"]="set",this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new a({model:new s({message:"rendering travel status page"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.location=new o,this.location.set("id",this.user.get("email")),this.locationPromise=this.location.fetch(),this.locationPromise.done(this.render)},r.prototype.render=function(){return this.$el.html(this.template(this.location.toJSON()))},r.prototype.set=function(e){var t,n=this;t=this.$el.find("#status").val();if(!t){alert("Travel Status can't be empty");return}return this.location.set({interest:t,last_modify:Date.now()}),this.location.save().done(function(){return n.router.navigate("beacon",{trigger:!0})})},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/spreadsheet",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(n.Model),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/spreadsheet_list",["underscore","backbone","util/util","model/spreadsheet"],function(e,n,r,i){var s;return s=function(n){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,n),s.prototype.id="0B0S9wwNRj-wtZFdjcVhDTTBVcGM",s.prototype.model=i,s.prototype.url=function(){return"https://docs.google.com/feeds/default/private/full/"+this.id+"/contents?v=3&alt=json-in-script&access_token="+this.access_token},s.prototype.parse=function(t){var n;return r.debug("spreadsheets response: ",t),n=t.feed.entry,e.filter(n,function(e){var t;return e.id=e.id.$t,t=e.gd$resourceId.$t.split(":"),e.gd$resourceId.$t=t[1],e.updatedDate=e.updated.$t.substring(0,10),t[0]==="spreadsheet"})},s}(n.Collection),s})}.call(this),define("text!template/project_list.html",[],function(){return'<div class="tab_bar" id="tab_bar"></div>\n<header>\n  <h1 class="project_list_header">Project</h1>\n</header>\n<ul id="project_list" class="project_list">\n  <% _.each(items, function(item){ %>  \n    <li data-id="<%= item.gd$resourceId.$t %>">\n      <a class="project_name" href="#projects/<%= item.gd$resourceId.$t %>"><%= item.title.$t %></a>\n      <time class="last_update" datetime="<%= item.updatedDate %>"><%= item.updatedDate %></time>\n    </li>\n  <% }) %>\n</ul>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/project_list_view",["underscore","backbone","util/util","model/user","model/loading","model/spreadsheet_list","view/navbar_view","view/loading_view","text!template/project_list.html","view/tab_controller"],function(e,n,r,i,s,o,u,a,f,l){var c;return c=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(f),r.prototype.initialize=function(){var t,n;return this.selected="t0",e.bindAll(this),this.number=1,this.bindEvents(),this._preRender(),this.model=new o,this.user=new i,this.user.on("change:userName",this.userDataReady),t=document.getElementById("body"),t.className="1",console.log(t),n=new u({model:this.user}),this.model.on("reset",this.spreadSheetListReady)},r.prototype.bindEvents=function(){var e,t,n,r,i,s;for(n=i=0;i<4;n=++i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={};for(n=s=0;s<4;n=++s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new a({model:new s({message:"rendering ProjectList page"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.model.access_token=this.user.getAccessToken(),this.fetchProjectList()},r.prototype.fetchProjectList=function(){return this.model.fetch({dataType:"jsonp"})},r.prototype.spreadSheetListReady=function(){return this.loadingView.empty(),this.render()},r.prototype.render=function(){return this.$el.html(this.template({items:this.model.toJSON()})),this.createTabs()},r.prototype.createTabs=function(){var e;return e=new l({model:this.number})},r.prototype.tabSelected=function(){var e,t;console.log(event.target.id[1]);if(event.target.id!==this.selected&&event.target.className!=="x_icon"&&event.target.className!=="tab_default_x")return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id},r}(n.View),c})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/project_category",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(n.Model),i})}.call(this),function(e,t){function n(e,t){this._d=e,this._isUTC=!!t}function r(e){return e<0?Math.ceil(e):Math.floor(e)}function i(e){var t=this._data={},n=e.years||e.y||0,i=e.months||e.M||0,s=e.weeks||e.w||0,o=e.days||e.d||0,u=e.hours||e.h||0,a=e.minutes||e.m||0,f=e.seconds||e.s||0,l=e.milliseconds||e.ms||0;this._milliseconds=l+f*1e3+a*6e4+u*36e5,this._days=o+s*7,this._months=i+n*12,t.milliseconds=l%1e3,f+=r(l/1e3),t.seconds=f%60,a+=r(f/60),t.minutes=a%60,u+=r(a/60),t.hours=u%24,o+=r(u/24),o+=s*7,t.days=o%30,i+=r(o/30),t.months=i%12,n+=r(i/12),t.years=n}function s(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function o(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function u(e){return Object.prototype.toString.call(e)==="[object Array]"}function a(t){return new e(t[0],t[1]||0,t[2]||1,t[3]||0,t[4]||0,t[5]||0,t[6]||0)}function f(t,n){function r(n){var g,y;switch(n){case"M":return i+1;case"Mo":return i+1+v(i+1);case"MM":return s(i+1,2);case"MMM":return E.monthsShort[i];case"MMMM":return E.months[i];case"D":return o;case"Do":return o+v(o);case"DD":return s(o,2);case"DDD":return g=new e(u,i,o),y=new e(u,0,1),~~((g-y)/864e5+1.5);case"DDDo":return g=r("DDD"),g+v(g);case"DDDD":return s(r("DDD"),3);case"d":return a;case"do":return a+v(a);case"ddd":return E.weekdaysShort[a];case"dddd":return E.weekdays[a];case"w":return g=new e(u,i,o-a+5),y=new e(g.getFullYear(),0,4),~~((g-y)/864e5/7+1.5);case"wo":return g=r("w"),g+v(g);case"ww":return s(r("w"),2);case"YY":return s(u%100,2);case"YYYY":return u;case"a":return m?m(l,c,!1):l>11?"pm":"am";case"A":return m?m(l,c,!0):l>11?"PM":"AM";case"H":return l;case"HH":return s(l,2);case"h":return l%12||12;case"hh":return s(l%12||12,2);case"m":return c;case"mm":return s(c,2);case"s":return h;case"ss":return s(h,2);case"S":return~~(p/100);case"SS":return s(~~(p/10),2);case"SSS":return s(p,3);case"Z":return(d<0?"-":"+")+s(~~(Math.abs(d)/60),2)+":"+s(~~(Math.abs(d)%60),2);case"ZZ":return(d<0?"-":"+")+s(~~(10*Math.abs(d)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return f(t,E.longDateFormat[n]);default:return n.replace(/(^\[)|(\\)|\]$/g,"")}}var i=t.month(),o=t.date(),u=t.year(),a=t.day(),l=t.hours(),c=t.minutes(),h=t.seconds(),p=t.milliseconds(),d=-t.zone(),v=E.ordinal,m=E.meridiem;return n.replace(O,r)}function l(e){switch(e){case"DDDD":return P;case"YYYY":return H;case"S":case"SS":case"SSS":case"DDD":return D;case"MMM":case"MMMM":case"ddd":case"dddd":case"a":case"A":return B;case"Z":case"ZZ":return j;case"T":return F;case"MM":case"DD":case"dd":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return _;default:return new RegExp(e.replace("\\",""))}}function c(e,t,n,r){var i;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(E.monthsParse[i].test(t)){n[1]=i;break}break;case"D":case"DD":case"DDD":case"DDDD":n[2]=~~t;break;case"YY":t=~~t,n[0]=t+(t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(U),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}}function h(t,n){var r=[0,0,1,0,0,0,0],i={tzh:0,tzm:0},s=n.match(O),o,u;for(o=0;o<s.length;o++)u=(l(s[o]).exec(t)||[])[0],t=t.replace(l(s[o]),""),c(s[o],u,r,i);return i.isPm&&r[3]<12&&(r[3]+=12),i.isPm===!1&&r[3]===12&&(r[3]=0),r[3]+=i.tzh,r[4]+=i.tzm,i.isUTC?new e(e.UTC.apply({},r)):a(r)}function p(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function d(e,t){var r,i=e.match(M)||[],s,o=99,u,a,l;for(u=0;u<t.length;u++)a=h(e,t[u]),s=f(new n(a),t[u]).match(M)||[],l=p(i,s),l<o&&(o=l,r=a);return r}function v(t){var n="YYYY-MM-DDT",r;if(I.exec(t)){for(r=0;r<4;r++)if(R[r][1].exec(t)){n+=R[r][0];break}return j.exec(t)?h(t,n+" Z"):h(t,n)}return new e(t)}function m(e,t,n,r){var i=E.relativeTime[e];return typeof i=="function"?i(t||1,!!n,e,r):i.replace(/%d/i,t||1)}function g(e,t){var n=x(Math.abs(e)/1e3),r=x(n/60),i=x(r/60),s=x(i/24),o=x(s/365),u=n<45&&["s",n]||r===1&&["m"]||r<45&&["mm",r]||i===1&&["h"]||i<22&&["hh",i]||s===1&&["d"]||s<=25&&["dd",s]||s<=45&&["M"]||s<345&&["MM",x(s/30)]||o===1&&["y"]||["yy",o];return u[2]=t,u[3]=e>0,m.apply({},u)}function y(e,t){E.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function b(e){E.duration.fn[e]=function(){return this._data[e]}}function w(e,t){E.duration.fn["as"+e]=function(){return+this/t}}var E,S="1.6.2",x=Math.round,T,N={},C="en",k=typeof module!="undefined",L="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),A=/^\/?Date\((\-?\d+)/i,O=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|LT|LL?L?L?)/g,M=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,_=/\d\d?/,D=/\d{1,3}/,P=/\d{3}/,H=/\d{4}/,B=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,j=/Z|[\+\-]\d\d:?\d\d/i,F=/T/i,I=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,q="YYYY-MM-DDTHH:mm:ssZ",R=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],U=/([\+\-]|\d\d)/gi,z="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),W={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6};E=function(r,i){if(r===null||r==="")return null;var s,o,f;return E.isMoment(r)?(s=new e(+r._d),f=r._isUTC):i?u(i)?s=d(r,i):s=h(r,i):(o=A.exec(r),s=r===t?new e:o?new e(+o[1]):r instanceof e?r:u(r)?a(r):typeof r=="string"?v(r):new e(r)),new n(s,f)},E.utc=function(t,r){return u(t)?new n(new e(e.UTC.apply({},t)),!0):r&&t?E(t+" +0000",r+" Z").utc():E(t&&!j.exec(t)?t+"+0000":t).utc()},E.unix=function(e){return E(e*1e3)},E.duration=function(e,t){var n=E.isDuration(e),r=typeof e=="number",s=n?e._data:r?{}:e;return r&&(t?s[t]=e:s.milliseconds=e),new i(s)},E.humanizeDuration=function(e,t,n){return E.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},E.version=S,E.defaultFormat=q,E.lang=function(e,t){var n,r,i=[];if(!e)return C;if(t){for(n=0;n<12;n++)i[n]=new RegExp("^"+t.months[n]+"|^"+t.monthsShort[n].replace(".",""),"i");t.monthsParse=t.monthsParse||i,N[e]=t}if(N[e]){for(n=0;n<L.length;n++)E[L[n]]=N[e][L[n]]||N.en[L[n]];C=e}else k&&(r=require("./lang/"+e),E.lang(e,r))},E.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:!1,calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),E.isMoment=function(e){return e instanceof n},E.isDuration=function(e){return e instanceof i},E.fn=n.prototype={clone:function(){return E(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return f(this,e?e:E.defaultFormat)},add:function(e,t){var n=t?E.duration(+t,e):E.duration(e);return o(this,n,1),this},subtract:function(e,t){var n=t?E.duration(+t,e):E.duration(e);return o(this,n,-1),this},diff:function(e,t,n){var r=this._isUTC?E(e).utc():E(e).local(),i=(this.zone()-r.zone())*6e4,s=this._d-r._d-i,o=this.year()-r.year(),u=this.month()-r.month(),a=this.date()-r.date(),f;return t==="months"?f=o*12+u+a/30:t==="years"?f=o+(u+a/30)/12:f=t==="seconds"?s/1e3:t==="minutes"?s/6e4:t==="hours"?s/36e5:t==="days"?s/864e5:t==="weeks"?s/6048e5:s,n?f:x(f)},from:function(e,t){return E.duration(this.diff(e)).humanize(!t)},fromNow:function(e){return this.from(E(),e)},calendar:function(){var e=this.diff(E().sod(),"days",!0),t=E.calendar,n=t.sameElse,r=e<-6?n:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:n;return this.format(typeof r=="function"?r.apply(this):r)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<E([this.year()]).zone()||this.zone()<E([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},sod:function(){return E(this).hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return E(this).month(this.month()+1).date(0).date()}};for(T=0;T<z.length;T++)y(z[T].toLowerCase(),z[T]);y("year","FullYear"),E.duration.fn=i.prototype={weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=E.relativeTime,r=g(t,!e);return e&&(r=(t<=0?n.past:n.future).replace(/%s/i,r)),r}};for(T in W)W.hasOwnProperty(T)&&(w(T,W[T]),b(T.toLowerCase()));w("Weeks",6048e5),k&&(module.exports=E),typeof window!="undefined"&&typeof ender=="undefined"&&(window.moment=E),typeof define=="function"&&define.amd&&define("moment",[],function(){return E})}(Date),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/project_categories",["underscore","backbone","util/util","model/project_category","moment"],function(e,n,r,i,s){var o;return o=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.worksheetId=1,r.prototype.model=i,r.prototype.url=function(){return"https://spreadsheets.google.com/feeds/list/"+this.id+"/"+this.worksheetId+"/private/full?v=3&alt=json-in-script&access_token="+this.access_token},r.prototype.initialize=function(e,t){return this.id=t.id},r.prototype.parse=function(t){var n,r,i=this;return n=[],r=t.feed.entry,e.each(r,function(e){var t,r;if(!e.gsx$category)return;t=e.gsx$category.$t;if(t.length!==0)return n.push({name:t,subcategory:[i._parseSubCategory(e)]});r=n.length;if(r>0)return n[r-1].subcategory.push(i._parseSubCategory(e))}),n},r.prototype._parseSubCategory=function(e){var t,n,r,i;return i=e["gsx$sub-category"].$t,n=e.gsx$startdate.$t,t=e.gsx$enddate.$t,r={name:i,startDate:n,endDate:t,workingWeeks:this._parseWorkingWeeks(n,t)}},r.prototype._parseWorkingWeeks=function(e,t){var n,r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;g=[];if((e!=null?e.length:void 0)===0||(t!=null?t.length:void 0)===0)return g;m=8,h=s(e,"M/D/YYYY"),r=s(t,"M/D/YYYY"),n=s().day(1),c=s().day(7+(m-1)*7),p=Math.ceil(h.diff(n,"days",!0)),i=Math.ceil(c.diff(r,"days",!0));for(u=y=0;0<=m?y<m:y>m;u=0<=m?++y:--y){g[u]="",v=[];if(p>=u*7&&p<=u*7+6){d=p-u*7+1;for(a=b=d;d<=7?b<7:b>7;a=d<=7?++b:--b)v[a]=!0}if(p<u*7&&i<(m-u)*7-6)for(f=w=0;w<7;f=++w)v[f]=!0;if(i>=(m-u)*7-6&&i<=(m-u)*7){o=(m-u)*7-i+1;for(l=E=0,S=o+1;0<=S?E<S:E>S;l=0<=S?++E:--E)v[l]=!0}g[u]=v}return g},r}(n.Collection),o})}.call(this),define("text!template/project.html",[],function(){return'\n<p id="window_width"></p>\n<div id="scrollable" class="scroll_view">\n  <table>\n\n\n    <thead class="unmoving">\n      <tr id="top">\n          <% _.each(weeks, function(week) { %>\n            <th>......<%= week.name %>......</th>\n          <% }) %>\n        </tr>\n    </thead>\n  <% var id = 0 %>\n  <% _.each(items, function(item) { %>\n    <tbody id="category<%=id%>">\n      \n        <tr>\n          <td>\n            <div><h2><%= item.name %></h2></div>\n          </td>\n        </tr>\n\n        <% _.each(item.subcategory, function(sub) { %>\n          <tr>\n            <td><%= sub.name %></td>\n            <% _.each(sub.workingWeeks, function(workingWeek) { %>\n              <td >\n                \n                <div class="week_box"> \n                  <table>\n                    <tr>\n                      <% for (i = 0; i < 7; i = i + 1) {%>\n                        <td>\n                          <% if (workingWeek[i]) {%>\n                              <div class="day_box"></div>\n                          <%} else {%>\n                              <div class="not_day_box"></div>\n                          <%}%>\n                          \n                        </td>\n                      <%}%>\n                    </tr>\n                  </table>\n                </div>\n\n              </td>\n            <% }) %>  \n          </tr>\n        <% }) %>\n\n      \n    </tbody>\n    <% id = id + 1 %>\n  <% }) %>\n\n  </table>\n</div>\n\n<table>\n  <tr>\n    <% for (i = 0; i < id; i = i + 1) { %>\n    <td>\n      <button class="category<%=i%>" value = "<%=i%>"><%=i + 1%></button>\n    </td>\n    <%}%>\n  </tr>\n</table>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/project_view",["underscore","backbone","util/util","model/user","model/loading","model/project_categories","view/navbar_view","view/loading_view","text!template/project.html","moment"],function(e,n,r,i,s,o,u,a,f,l){var c;return c=function(n){function c(){return c.__super__.constructor.apply(this,arguments)}return t(c,n),c.prototype.el="#main",c.prototype.template=e.template(f),c.prototype.initialize=function(t){var n,r,s,a;return e.bindAll(this),this.bindEvents(),this._preRender(),this.model=new o([],{id:t.spreadsheet_id}),this.user=new i,this.user.on("change:userName",this.userDataReady),n=document.getElementById("body"),n.className="1",console.log(n),r=new u({model:this.user}),this.model.on("reset",this.spreadSheetReady),a="onorientationchange"in window,s=a?"orientationchange":"resize",window.addEventListener(s,this._calculateColWidth)},c.prototype.bindEvents=function(){var e,t,n,r;this.$el.undelegate(".sub_category"),t={},e="createTouch"in document?"tap":"click";for(n=r=0;r<3;n=++r)t[""+e+" .category"+n]="tabSelected";return this.delegateEvents(t)},c.prototype._preRender=function(){return this.loadingView=new a({model:new s({message:"rendering Project page"})}),this.loadingView.render()},c.prototype.userDataReady=function(){return this.model.access_token=this.user.getAccessToken(),this.fetchProject()},c.prototype.fetchProject=function(){return this.model.fetch({dataType:"jsonp"})},c.prototype.spreadSheetReady=function(){return this.loadingView.empty(),this.render()},c.prototype._getWeeksFromNow=function(){var e,t,n;t=[];for(e=n=0;n<=7;e=++n)t[e]={name:l().day(1+e*7).format("MM/DD/YY"),landscapeOnly:e<4?"":"landscape_only"};return t},c.prototype.render=function(){var e,t,n,i;r.debug("render ProjectView"),this.$el.html(this.template({items:this.model.toJSON(),weeks:this._getWeeksFromNow()})),this._calculateColWidth(),$("#window_width").append("<p>"+window.innerWidth+"</p>"),t=this.model.toJSON().length,i=[];for(e=n=1;1<=t?n<t:n>t;e=1<=t?++n:--n)i.push(this.$el.find("#category"+e).hide());return i},c.prototype._calculateColWidth=function(){return window.orientation===90||window.orientation===-90?this.$el.find("table").addClass("landscape"):this.$el.find("table").removeClass("landscape")},c.prototype.tabSelected=function(e){var t,n,r,i,s;r=e.target.value,console.log(r),n=this.model.toJSON().length,s=[];for(t=i=0;0<=n?i<n:i>n;t=0<=n?++i:--i)t===Number(r)?s.push(this.$el.find("#category"+r).show()):s.push(this.$el.find("#category"+t).hide());return s},c}(n.View),c})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/kpi_category",["underscore","backbone","util/util"],function(e,n,r){var i;return i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(n.Model),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("model/kpi_categories",["underscore","backbone","util/util","model/kpi_category","moment"],function(e,n,r,i,s){var o;return o=function(n){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,n),s.prototype.worksheetId=1,s.prototype.id="0AkS9wwNRj-wtdGVKN0x5SFFOdXBITXBYOW96UzBpSnc",s.prototype.model=i,s.prototype.url=function(){return"https://spreadsheets.google.com/feeds/list/"+this.id+"/"+this.worksheetId+"/private/full?v=3&alt=json-in-script&access_token="+this.access_token},s.prototype.initialize=function(){},s.prototype.parse=function(t){var n,i;return r.debug("kpi categories response: ",t),n={},i=t.feed.entry,e.each(i,function(e){var t,r,i;return t=e.gsx$category.$t,r=e.gsx$kpi.$t,i=e.gsx$value.$t,i=i.substring(0,i.indexOf(".")+3),n[t]||(n[t]={name:t,data:[]}),n[t].data.push({name:r,value:i})}),e.values(n)},s}(n.Collection),o})}.call(this),define("text!template/kpi_categories.html",[],function(){return'<div class="dashedTopLine" id="topDash"></div>\n<div class="tab_bar" id="tab_bar"></div>\n<div id="pie"></div>\n\n<h3 class="KPI_head">Header</h3>\n<span class="kpiName">Name</span> \n\n<div id="holder2" class="holder2"></div>\n<button id="previousKPI" class="prev_kpi"></button>\n<button id="nextKPI" class="next_kpi"></button>\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/data_visualization",["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.initialize=function(){return e.bindAll(this),this.renderPie()},r.prototype.renderPie=function(){var e;return e=function(e){function s(e){var t=0,i;for(c=0;c<h;c++)i=360/a*o[c],u[c].animate({segment:[c,n,r,radii[c],t,t+=i]},e||1500,"bounce"),u[c].angle=t-i/2}var t=Raphael("holder2"),n=160,r=205,i=90;radii=[],t.customAttributes.segment=function(e,t,n,r,i,s){var o=s-i>180,u=(s-i)/360;return i=i%360*Math.PI/180,s=s%360*Math.PI/180,{path:[["M",t,n],["l",r*Math.cos(i),r*Math.sin(i)],["A",r,r,0,+o,1,t+r*Math.cos(s),n+r*Math.sin(s)],["z"]],fill:"hsb("+u+", .50, .8)"}};var o=[1,8,2,7,5,2],u=t.set(),a,f,l=t.circle(n,r,0).attr({stroke:"#e9e9e9","stroke-width":4});o=o.sort(function(e,t){return t-e}),a=0;for(var c=0,h=o.length;c<h;c++)a+=o[c];f=0;for(c=0;c<h;c++){radii[c]=i;var p=360/a*o[c];(function(e,o){segment=t.path().attr({segment:[e,n,r,1,f,f+o],stroke:"#e9e9e9"}),segment.mousedown(function(){radii[e]==i?radii[e]=i+10:radii[e]=i,s(650),console.log("down")}),u.push(segment)})(c,p),f+=p}l.animate({r:i+1},1e3,"bounce"),s(1e3)},e()},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/kpi_dashboard_view",["underscore","backbone","util/util","model/user","model/loading","model/kpi_categories","view/navbar_view","view/loading_view","text!template/kpi_categories.html","view/tab_controller","view/data_visualization"],function(e,n,r,i,s,o,u,a,f,l,c){var h;return h=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(f),r.prototype.initialize=function(){var t,n;return this.currentPie=0,this.number=4,this.selected="t0",e.bindAll(this),this.bindEvents(),this._preRender(),this.model=new o,this.user=new i,this.user.on("change:userName",this.userDataReady),this.currentCategoryIndex=0,this.currentKPIIndex=0,t=document.getElementById("body"),t.className="2",n=new u({model:this.user}),this.model.on("reset",this.kpiCategoriesReady)},r.prototype.bindEvents=function(){var e,t,n,r,i,s;this.$el.undelegate("#previousKPI"),this.$el.undelegate("#nextKPI");for(n=i=0;i<4;n=++i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={},t[""+e+" #previousKPI"]="previousKPI",t[""+e+" #nextKPI"]="nextKPI";for(n=s=0;s<4;n=++s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new a},r.prototype.userDataReady=function(){return this.model.access_token=this.user.getAccessToken(),this.fetchKpiCategories()},r.prototype.fetchKpiCategories=function(){return this.model.fetch({dataType:"jsonp"})},r.prototype.kpiCategoriesReady=function(){return this.loadingView.empty(),this.render()},r.prototype.render=function(){var e;return this.items=this.model.toJSON(),this.$el.html(this.template),this.currentCategoryIndex=0,this.currentKPIIndex=0,this.updateContent(),this.createTabs(),this.updatePie(),e=new c},r.prototype.updateIndex=function(e,t,n){var r;return r=t-1,n+=e,n>r?n=0:n<0&&(n=r),n},r.prototype.nextKPI=function(){return this.currentKPIIndex=this.updateIndex(1,this.items[this.currentCategoryIndex].data.length,this.currentKPIIndex),this.updateContent(),this.updatePie()},r.prototype.previousKPI=function(){return this.currentKPIIndex=this.updateIndex(-1,this.items[this.currentCategoryIndex].data.length,this.currentKPIIndex),this.updateContent(),this.updatePie()},r.prototype.updateContent=function(){return this.$(".KPI_head").text(this.items[this.currentCategoryIndex].name),this.$(".numberLabel").text(this.items[this.currentCategoryIndex].data.length),this.$(".kpiName").text(this.items[this.currentCategoryIndex].data[this.currentKPIIndex].name)},r.prototype.updatePie=function(){return this.currentPie=this.currentPie+1,this.currentPie>3&&(this.currentPie=1),document.getElementById("pie").className="pie_"+this.currentPie},r.prototype.createTabs=function(){var e;return e=new l({model:this.number})},r.prototype.tabSelected=function(){var e,t;if(event.target.id!==this.selected&&event.target.className!=="x_icon"&&event.target.className!=="tab_default_x")return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id,this.currentKPIIndex=0,this.currentCategoryIndex=this.selected[1],this.updateContent()},r}(n.View),h})}.call(this),define("text!template/settings.html",[],function(){return'<ul class="floating">\n  <!-- <li><a id="setHome" class="setHome" href="#settings/home">Set Home Office</a></li> -->\n</ul>\n\n\n<script type="text/paperscript" canvas="tabs" resize>\n\n	document.getElementByIDonload = function() {\n		var topLeft = new Point(10, 20);\n		var rectSize = new Size(200, 100);\n		var path = new Path.Rectangle(topLeft, rectSize);\n		path.strokeColor = \'red\';\n		path.fillColor = \'black\';\n	 	var myCircle = new Path.Circle(new Point(500, 500), 50);\n	 	myCircle.fillColor = \'black\';\n\n		path.onMouseEnter = function () { \n	                this.fillColor = \'red\'; \n	            } \n	    path.onMouseLeave = function () { \n	        this.fillColor = \'black\'; \n	    } \n	}\n\n\n</script>\n\n\n\n\n<!-- <canvas class="canvas_container" id="tabs" resize></canvas> -->\n\n<div class="tab_bar" id="tab_bar">\n\n</div>\n\n\n\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/settings_view",["underscore","backbone","util/util","model/user","model/loading","view/navbar_view","view/loading_view","text!template/settings.html","view/tab_controller"],function(e,n,r,i,s,o,u,a,f){var l;return l=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(a),r.prototype.initialize=function(){var t;return this.number=4,this.selected="t0",e.bindAll(this),this._preRender(),this.bindEvents(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=new o({model:this.user})},r.prototype.bindEvents=function(){var e,t,n,r,i,s,o,u;for(n=i=0,o=this.number;0<=o?i<o:i>o;n=0<=o?++i:--i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={};for(n=s=0,u=this.number;0<=u?s<u:s>u;n=0<=u?++s:--s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new u({model:new s({message:"rendering settings page"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.render()},r.prototype.render=function(){return this.$el.html(this.template("")),this.createTabs()},r.prototype.createTabs=function(){var e;return e=new f({model:this.number})},r.prototype.tabSelected=function(){var e,t;if(event.target.id!==this.selected)return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id},r}(n.View),l})}.call(this),define("text!template/interest.html",[],function(){return'<header>\n  <h1 class="list_header" colspan="2">What are your peers interested in?</h1>\n</header>\n<div id="interest_map"> </div>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/interests_view",["underscore","backbone","text!template/interest.html"],function(e,n,r){var i;return i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.el="#locations",i.prototype.template=e.template(r),i.prototype.initialize=function(){return e.bindAll(this),this.bindEvents(),this.model.on("reset",this.render),this.model.fetch()},i.prototype.bindEvents=function(){var e,t;return this.$el.undelegate(".has_status"),e="createTouch"in document?"tap":"click",t={},t[""+e+" .has_status"]="showUserStatus",this.delegateEvents(t)},i.prototype.render=function(){return this.length=this.model.length,this.$el.html(this.template({items:this.model.toJSON()})),this.$("#length").text(this.length),this.showInterestMap()},i.prototype.showUserStatus=function(e){var t,n;return t=$(e.target),n=t.hasClass("has_status")?t.find(".user_status"):t.parents(".has_status").find(".user_status"),alert($.trim(n.html()))},i.prototype.showInterestMap=function(){var e,t,n,r,i;e=this.model.toJSON(),n={};for(r in e)t=e[r].interest,n[t]?n[t]=n[t]+1:n[t]=1;i=[];for(t in n)t?i.push($("#interest_map").append("<p> "+t+": "+n[t]+" are interested</p>")):i.push(void 0);return i},i}(n.View),i})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/interest_matcher",["underscore","backbone","model/location"],function(e,n,r){var i;return i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.el="#matches",i.prototype.initialize=function(){return e.bindAll(this),this.match()},i.prototype.match=function(){var e,t,n,i,s,o,u,a,f;console.log("hello, this is matcher"),o=[],a=this.model.toJSON();for(t in a){e=a[t];if(e.has_match!=="false"||o[e.email])continue;for(n in a){u=a[n];if(e.email===u.email||e.interest!==u.interest||o[u.email])continue;o[e.email]=u.email,o[u.email]=e.email,this.$el.append("<p> "+e.email+" matched with "+u.email+"</p>");break}}f=[];for(t in o)i=new r,i.set("id",t),console.log(t),s=i.fetch(),f.push(s.done(this.saver(i,o[t])));return f},i.prototype.saver=function(e,t){return e.set({has_match:t}),e.save(),console.log(e.get("home"))},i}(n.View)})}.call(this),define("text!template/brown_bag.html",[],function(){return'<div class="tab_bar" id="tab_bar"></div>\n<p>\n	What are you interested in?\n</p>\n<fieldset class="form-vertical interests">\n  <div class="control-group">\n    <div class="controls docs-input-sizes">\n      <select id="interest">\n	      <% if(!interest) { %>\n          <option>None</option>\n        <% } %>\n        <%= interest == "1" ? "<option selected=selected>" : "<option>" %>\n          1\n        </option>\n        <%= interest == "2" ? "<option selected=selected>" : "<option>" %>\n          2\n        </option>\n        <%= interest == "3" ? "<option selected=selected>" : "<option>" %>\n          3\n        </option>\n      </select>\n    </div>\n  </div>\n</fieldset>\n\n<p id = "changed">\n	No change\n</p>\n\n<div>\n  <div id="locations" class="locations"></div>  \n</div>\n\n<div id="button"></div>\n<div id="matches"></div>\n<a href="#kpis" title="Kpi">KPI Dashboard</a>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/brown_bag_view",["underscore","backbone","util/util","model/user","model/loading","model/location","model/location_collection","view/location_view","view/interests_view","view/navbar_view","view/interest_matcher","view/loading_view","text!template/brown_bag.html","view/tab_controller"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d){var v;return v=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el="#main",r.prototype.template=e.template(p),r.prototype.initialize=function(){var t,n;return this.selected="t0",e.bindAll(this),this.number=1,this.bindEvents(),this._preRender(),this.user=new i,this.user.on("change:userName",this.userDataReady),t=document.getElementById("body"),t.className="3",console.log(t),n=new l({model:this.user})},r.prototype.bindEvents=function(){var e,t,n,r,i,s;this.$el.undelegate("#interest"),this.$el.undelegate("#match");for(n=i=0;i<4;n=++i)this.$el.undelegate("tab_default"+n);e="createTouch"in document?"tap":"click",t={},t["change #interest"]="set",t[""+e+" #match"]="callInterestMatcher";for(n=s=0;s<4;n=++s)r="#t"+n,t[""+e+" "+r]="tabSelected";return this.delegateEvents(t)},r.prototype._preRender=function(){return this.loadingView=new h({model:new s({message:"rendering brown bag"})}),this.loadingView.render()},r.prototype.userDataReady=function(){return this.loadingView.empty(),this.location=new o,this.location.set("id",this.user.get("email")),this.locationPromise=this.location.fetch(),this.locationPromise.done(this.render)},r.prototype.render=function(){return console.log(this.location.get("interest")),console.log(this.location.get("email")),console.log(this.location.get("is_admin")),this.$el.html(this.template(this.location.toJSON())),this.renderLocationList(),this.location.get("is_admin")==="1"&&this.renderMatch(),this.createTabs()},r.prototype.renderLocationList=function(){var e;return this.interestCollection=new u,e=new f({model:this.interestCollection})},r.prototype.renderMatch=function(){return console.log("fadsf"),$("#button").append('<button id="match"> match </button>')},r.prototype.set=function(e){var t;return this.$("#changed").text("changed!"),t=$(e.target).val(),console.log(t),this.location.set({interest:t,last_modify:Date.now()}),this.location.save(),this.$("#changed").text(t)},r.prototype.callInterestMatcher=function(){var e;return e=new c({model:this.interestCollection})},r.prototype.createTabs=function(){var e;return e=new d({model:this.number})},r.prototype.tabSelected=function(){var e,t;if(event.target.id!==this.selected&&event.target.className!=="x_icon"&&event.target.className!=="tab_default_x")return event.target.className="tab_bar_selected",e=101,document.getElementById(event.target.id).style.zIndex=e.toString(),t=100-this.selected[1]-1,document.getElementById(this.selected).style.zIndex=t.toString(),this.selected==="t0"?document.getElementById(this.selected).className="tab_bar_first":document.getElementById(this.selected).className="tab_default",this.selected=event.target.id},r}(n.View)})}.call(this),define("text!template/logout.html",[],function(){return'<iframe id="googleLogout" class="googleLogout"></iframe>'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/logout_view",["underscore","backbone","util/util","model/loading","view/loading_view","text!template/logout.html"],function(e,n,r,i,s,o){var u;return u=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.el="#main",i.prototype.template=e.template(o),i.prototype.initialize=function(){return e.bindAll(this)},i.prototype.render=function(){var e,t,n;return r.debug("LogoutView render"),this.$el.html(this.template("")),t=this.$el.find("#googleLogout")[0],e=new s,e.render(),n=0,t.onload=function(){r.debug("logout done"),n+=1;if(n>4)return r.loc.href=""+r.loc.protocol+"//"+r.loc.host,console.log(r.loc.href+" href")},t.src="https://accounts.google.com/Logout"},i}(n.View),u})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("view/auth_callback_view",["underscore","backbone","util/util","model/gauth"],function(e,n,r,i){var s;return s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.router=window.EngApp.appRouter,this.model=new i},n.prototype.render=function(){return this.model.parseAuthToken(r.loc.hash.substring(1)),this.router.navigate("",{trigger:!0})},n}(n.View),s})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("router/app_router",["backbone","util/util","view/index_view","view/beacon_view","view/location_home_view","view/travel_status_view","view/project_list_view","view/project_view","view/kpi_dashboard_view","view/settings_view","view/brown_bag_view","view/logout_view","view/auth_callback_view"],function(e,n,r,i,s,o,u,a,f,l,c,h,p){var d;return d=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.routes={"":"index",beacon:"beacon","beacon/status":"changeStatus",projects:"projectDashboard","projects/:id":"project",kpis:"kpiDashboard",settings:"settings",brownbag:"brownBag","settings/home":"changeHome",logout:"logout"},n.prototype.initialize=function(){return this.route(/access_token=(.*)/,"authCallback")},n.prototype.index=function(){var e;return e=new r},n.prototype.beacon=function(){return this.beaconView=new i},n.prototype.changeStatus=function(){return this.travelStatus=new o},n.prototype.projectDashboard=function(){return this.projectList=new u},n.prototype.project=function(e){return this.projectView=new a({spreadsheet_id:e})},n.prototype.kpiDashboard=function(){return this.kpiDashboard=new f},n.prototype.settings=function(){return this.settings=new l},n.prototype.brownBag=function(){return this.brownBag=new c},n.prototype.changeHome=function(){return this.locationHome=new s},n.prototype.logout=function(){var e;return e=new h,e.render()},n.prototype.authCallback=function(e){var t;return t=new p,t.render()},n}(e.Router),d})}.call(this),function(){require.config({paths:{zepto:"libs/zepto/zepto_amd",underscore:"libs/underscore/underscore-min",backbone:"libs/backbone/backbone",backbone_localStorage:"libs/backbone/backbone.localStorage",text:"libs/require/text",moment:"libs/moment/moment.min"}}),require(["backbone","backbone_localStorage","router/app_router"],function(e,t,n){var r;return window.EngApp={},r=new n,window.EngApp.appRouter=r,e.history.start()})}.call(this),define("app",function(){})